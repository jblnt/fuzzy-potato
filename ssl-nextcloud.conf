# generated 2021-10-21, Mozilla Guideline v5.6, Apache 2.4.41, OpenSSL 1.1.1k, modern configuration
# https://ssl-config.mozilla.org/#server=apache&version=2.4.41&config=modern&openssl=1.1.1k&guideline=5.6

# this configuration requires mod_ssl, mod_rewrite, and mod_headers

<IfModule mod_ssl.c>
    <VirtualHost *:443>
        DocumentRoot /var/www/html/

        <Directory /var/www/html/>
          Require all granted
          AllowOverride All
          Options FollowSymLinks MultiViews
          <IfModule mod_dav.c>
            Dav off
          </IfModule>
        </Directory>

        SSLEngine on
        SSLCertificateFile      /etc/apache2/certs/apache-cert.crt
        SSLCertificateKeyFile   /etc/apache2/certs/apache-key.key

        <FilesMatch "\.(cgi|shtml|phtml|php)$">
            SSLOptions +StdEnvVars
        </FilesMatch>
                
        <Directory /usr/lib/cgi-bin>
            SSLOptions +StdEnvVars
        </Directory>

        # enable HTTP/2, if available
        Protocols h2 http/1.1

        # HTTP Strict Transport Security (mod_headers is required) (63072000 seconds)
        Header always set Strict-Transport-Security "max-age=63072000"
    </VirtualHost>
</IfModule>

# modern configuration
SSLProtocol             all -SSLv3 -TLSv1 -TLSv1.1 -TLSv1.2
SSLHonorCipherOrder     off
SSLSessionTickets       off
